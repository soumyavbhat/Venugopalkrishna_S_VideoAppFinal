import SocialSharingNetwork from"./social-sharing-network";import BaseNetworks from"./networks.json";import Vue from"vue";const inBrowser="undefined"!=typeof window;var $window=inBrowser?window:null;export function mockWindow(e){$window=e||window};export default{props:{url:{type:String,default:inBrowser?window.location.href:""},title:{type:String,default:""},description:{type:String,default:""},quote:{type:String,default:""},hashtags:{type:String,default:""},twitterUser:{type:String,default:""},withCounts:{type:[String,Boolean],default:!1},googleKey:{type:String,default:void 0},media:{type:String,default:""},networkTag:{type:String,default:"span"},networks:{type:Object,default:function(){return{}}}},data:()=>({baseNetworks:BaseNetworks,popup:{status:!1,resizable:!0,toolbar:!1,menubar:!1,scrollbars:!1,location:!1,directories:!1,width:626,height:436,top:0,left:0,window:void 0,interval:null}}),methods:{createSharingUrl(e){return this.baseNetworks[e].sharer.replace(/@url/g,encodeURIComponent(this.url)).replace(/@title/g,encodeURIComponent(this.title)).replace(/@description/g,encodeURIComponent(this.description)).replace(/@quote/g,encodeURIComponent(this.quote)).replace(/@hashtags/g,this.hashtags).replace(/@media/g,this.media).replace(/@twitteruser/g,this.twitterUser?"&via="+this.twitterUser:"")},share(e){this.openSharer(e,this.createSharingUrl(e)),this.$root.$emit("social_shares_open",e,this.url),this.$emit("open",e,this.url)},touch(e){window.open(this.createSharingUrl(e),"_self"),this.$root.$emit("social_shares_open",e,this.url),this.$emit("open",e,this.url)},openSharer(e,t){this.popup.window&&this.popup.interval&&(clearInterval(this.popup.interval),this.popup.window.close(),this.$root.$emit("social_shares_change",e,this.url),this.$emit("change",e,this.url)),this.popup.window=window.open(t,"sharer","status="+(this.popup.status?"yes":"no")+",height="+this.popup.height+",width="+this.popup.width+",resizable="+(this.popup.resizable?"yes":"no")+",left="+this.popup.left+",top="+this.popup.top+",screenX="+this.popup.left+",screenY="+this.popup.top+",toolbar="+(this.popup.toolbar?"yes":"no")+",menubar="+(this.popup.menubar?"yes":"no")+",scrollbars="+(this.popup.scrollbars?"yes":"no")+",location="+(this.popup.location?"yes":"no")+",directories="+(this.popup.directories?"yes":"no")),this.popup.window.focus(),this.popup.interval=setInterval(()=>{this.popup.window.closed&&(clearInterval(this.popup.interval),this.popup.window=void 0,this.$root.$emit("social_shares_close",e,this.url),this.$emit("close",e,this.url))},500)}},beforeMount(){this.baseNetworks=Vue.util.extend(this.baseNetworks,this.networks)},mounted(){if(!inBrowser)return;const e=void 0!==$window.screenLeft?$window.screenLeft:screen.left,t=void 0!==$window.screenTop?$window.screenTop:screen.top,i=$window.innerWidth?$window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,o=$window.innerHeight?$window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;this.popup.left=i/2-this.popup.width/2+e,this.popup.top=o/2-this.popup.height/2+t},components:{network:SocialSharingNetwork}};